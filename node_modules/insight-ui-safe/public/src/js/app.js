'use strict';

var defaultLanguage = localStorage.getItem('insight-language') || 'zh_CN';
// var defaultLanguageCode = localStorage.getItem('insight-languageCode') || 'Chinese';
var defaultLanguageCode = localStorage.getItem('insight-languageCode') || '中文';
var defaultCurrency = localStorage.getItem('insight-currency') || 'SAFE';

var app = angular.module('insight', [
    'ngAnimate',
    'ngResource',
    'ngRoute',
    'ngProgress',
    'ui.bootstrap',
    'ui.route',
    'monospaced.qrcode',
    'gettext',
    'angularMoment',
    'angular-echarts',  // 数据可视化依赖 echarts 
    'insight.system',
    'insight.socket',
    'insight.blocks',
    'insight.transactions',
    'insight.address',
    'insight.search',
    'insight.status',
    'insight.connection',
    'insight.currency',
    'insight.messages',
    'insight.masternode',
    'insight.assets',
    'insight.masternodeMobile',
    'insight.ModalInstanceController',
    'insight.lockedAddress',
    'insight.lockedDetail',
    'insight.unlockHeight',
    'insight.balanceRanking',
    'insight.amountStatistic',
    'insight.addressLabel',
]);

angular.module('insight.system', []);
angular.module('insight.socket', []);
angular.module('insight.blocks', []);
angular.module('insight.transactions', []);
angular.module('insight.address', []);
angular.module('insight.search', []);
angular.module('insight.status', []);
angular.module('insight.connection', []);
angular.module('insight.currency', []);
angular.module('insight.messages', []);
angular.module('insight.masternode', []);
angular.module('insight.assets', []);
angular.module('insight.masternodeMobile', []);
angular.module('insight.ModalInstanceController', []);
angular.module('insight.lockedAddress', []);
angular.module('insight.lockedDetail', []);
angular.module('insight.unlockHeight', []);
angular.module('insight.balanceRanking', []);
angular.module('insight.amountStatistic', []);
angular.module('insight.addressLabel', []);

// 添加全局配置信息 宝石通知资产ID
var config = {
    pow: {
        // 产块速度 一个块/每秒
        blockedSpeed: 150
    },
    // 这里以后用来放 SPOS 的相关配置
    spos: {
        // SPOS 共识算法生效高度
        height: 1092826 ,
        // 产块速度 一个块/每秒
        blockedSpeed: 30 , 
        // 每个区块挖矿奖励
        blockedReward: 0.53573464,
    } , 
    address_label:{
        BLOCK_HOLE_ADDRESS : 'XagqqFetxiDb9wbartKDrXgnqLah6SqX2S' , 
        APP_DESTORY_ADDRESS: 'XagqqFetxiDb9wbartKDrXgnqLah9fKoTx' ,
    }
}

const format = {
    numberFormat8:function( number ){
        return number / Math.pow( 10,8 )
    } , 
    amountFormat2:function( number ){
       /*
        * 参数说明：
        * number：要格式化的数字
        * decimals：保留几位小数
        * dec_point：小数点符号
        * thousands_sep：千分位符号
        * */
        const decimals = 2;
        number = (number + '').replace(/[^0-9+-Ee.]/g, '');
        var n = !isFinite(+number) ? 0 : +number,
            prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
            sep = ',',
            dec = '.',
            s = '',
            toFixedFix = function (n, prec) {
                var k = Math.pow(10, prec);
                return '' + Math.floor(n * k) / k;
            };
        s = (prec ? toFixedFix(n, prec) : '' + Math.floor(n)).split('.');
        var re = /(-?\d+)(\d{3})/;
        while (re.test(s[0])) {
            s[0] = s[0].replace(re, "$1" + sep + "$2");
        }
        if ((s[1] || '').length < prec) {
            s[1] = s[1] || '';
            s[1] += new Array(prec - s[1].length + 1).join('0');
        }
        return s.join(dec);
    }
}

app.constant( 'config' , config );
app.constant( 'format' , format );


