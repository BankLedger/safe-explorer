'use strict';

//Setting up route
angular.module('insight').config(function ($routeProvider) {
    $routeProvider.when('/block/:blockHash', {
        templateUrl: 'views/block.html',
        title: 'Safe Block '
    }).when('/block-index/:blockHeight', {
        controller: 'BlocksController',
        templateUrl: 'views/redirect.html'
    }).when('/tx/send', {
        templateUrl: 'views/transaction_sendraw.html',
        title: 'Broadcast Raw Transaction'
    }).when('/tx/:txId/:v_type?/:v_index?', {
        templateUrl: 'views/transaction.html',
        title: 'Safe Transaction '
    }).when('/', {
        templateUrl: 'views/index.html',
        title: 'Home'
    }).when('/blocks', {
        templateUrl: 'views/block_list.html',
        title: 'Safe Blocks solved Today'
    }).when('/blocks-date/:blockDate/:startTimestamp?', {
        templateUrl: 'views/block_list.html',
        title: 'Safe Blocks solved '
    }).when('/address/:addrStr', {
        templateUrl: 'views/address.html',
        title: 'Safe Address '
    }).when('/addressAssets/:addrStr/:assetId', {
        templateUrl: 'views/address.html',
        title: 'Safe Address '
    }).when('/status', {
        templateUrl: 'views/status.html',
        title: 'Status'
    }).when('/messages/verify', {
        templateUrl: 'views/messages_verify.html',
        title: 'Verify Message'
    }).when('/MasterNode', {
        templateUrl: 'views/masternode.html',
        title: 'Masternode'
    }).when('/masterNodeMobile', {
        templateUrl: 'views/masterNodeMobile.html',
        title: 'master Node Mobile'
    }).when('/masterNodeApp', {
        templateUrl: 'views/masterNodeApp.html',
        title: 'master Node App'
    }).when('/Masternode/:page', {
        templateUrl: 'views/masternode.html',
        title: 'Master Node'
    }).when('/Assets', {
        templateUrl: 'views/assets.html',
        title: 'Assets'
    }).when('/Assets/:name', {
        templateUrl: 'views/assets.html',
        title: 'Assets'
    }).when('/AssetsDetail/:assetsId', {
        templateUrl: 'views/assetsDetail.html',
        title: 'AssetsDetail'
    }).when('/locked', {
        templateUrl: 'views/lockingAddr.html',
        title: 'Locked Rankings'
    }).when('/lockedDetail/:address/:assetName', {
        templateUrl: 'views/lockedAddrDetail.html',
        title: 'Assets Detail'
    }).when('/rankings', {
        templateUrl: 'views/lockingAddr.html',
        title: 'Assets Ranking'
    }).when('/statistic', {
        templateUrl: 'views/statistic.html',
        title: 'Statistic'
    }).otherwise({
        templateUrl: 'views/404.html',
        title: 'Error'
    });
});

//Setting HTML5 Location Mode
angular.module('insight').config(function ($locationProvider) {
    $locationProvider.html5Mode(true);
    $locationProvider.hashPrefix('!');
}).run(function ($rootScope, $route, $location, $routeParams, $anchorScroll, ngProgress, gettextCatalog, amMoment) {
    gettextCatalog.currentLanguage = defaultLanguage;
    amMoment.changeLocale(defaultLanguage);
    $rootScope.$on('$routeChangeStart', function () {
        ngProgress.start();
    });

    $rootScope.$on('$routeChangeSuccess', function () {
        ngProgress.complete();

        //Change page title, based on Route information
        $rootScope.titleDetail = '';
        $rootScope.title = $route.current.title;
        $rootScope.isCollapsed = true;
        $rootScope.currentAddr = null;

        $location.hash($routeParams.scrollTo);
        $anchorScroll();
    });
});
