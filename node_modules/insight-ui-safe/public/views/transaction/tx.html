<div class="line-bot row" data-ng-hide="!tx">
    <div class="col-xs-7 col-md-8">
        <div class="ellipsis">
            <!-- +按钮:展开交易细节 -->
            <a class="btn-expand" title="Show/Hide items details" data-ng-click="itemsExpanded = !itemsExpanded">
                <span class="glyphicon glyphicon-plus-sign"
                      data-ng-class="{'glyphicon-minus-sign': itemsExpanded}"></span>
            </a>
            <a href="tx/{{tx.txid}}">{{tx.txid}}</a>
            <span class="btn-copy" clip-copy="tx.txid"></span>
        </div>
    </div>
    <div class="col-xs-5 col-md-4 text-right text-muted">
        <div data-ng-show="tx.firstSeenTs">
            <span translate>first seen at</span>
            <time>{{tx.firstSeenTs * 1000 | date:'medium'}}</time>
        </div>
        <div data-ng-show="tx.blocktime && !tx.firstSeenTs">
            <span translate>mined</span><!-- 开采 -->
            <time>{{tx.time * 1000 | date:'yyyy-MM-dd HH:mm:ss'}}</time>
        </div>
    </div>
</div>
<div class="row line-mid">
    <div class="col-md-5">
        <div class="row" data-ng-if="tx.isCoinBase">
            <div class="col-md-12 transaction-vin-vout" data-ng-repeat="vin in tx.vin">
                <div class="ellipsis">
                    <span translate>No Inputs (Newly Generated Coins)</span>
                </div>
            </div>
        </div>
        <div class="row" data-ng-if="!tx.isCoinBase">

            <!-- <<< Simple view : 简单视图  -->
            <div data-ng-if="!itemsExpanded" data-ng-init="currentInNoExpanded=0; sizeInNoExpanded=5">
                <div class="panel panel-default"
                     data-ng-repeat="vin in tx.vinSimple| startFrom:currentInNoExpanded*sizeInNoExpanded | limitTo:sizeInNoExpanded">
                    <div class="panel-body transaction-vin-vout">
                        <div  class="pull-right" data-ng-class="{'text-danger': $root.currentAddr == vin.addr.trim()}">
                            {{$root.currency.getConvertion(vin.value) || vin.value}}
                            <a title="{{vin.assetId}}" href="AssetsDetail/{{vin.assetId}}" data-ng-if="vin.assetId" >{{vin.shortName}}</a>
                            <span data-ng-if="!vin.assetId">{{vin.shortName}}</span>
                        </div>
                        <div class="ellipsis">
                            <span data-ng-show="vin.notAddr">{{vin.addr}}</span>
                            <span class="text-muted" title="Current Safe Address"
                                  data-ng-show="vin.addr.trim() == $root.currentAddr">{{vin.addr}}</span>
                            <a href="address/{{vin.addr}}"
                               data-ng-show="!vin.notAddr && vin.addr.trim() != $root.currentAddr">{{vin.addr}}</a>
                        </div>
                        <div data-ng-show="vin.unconfirmedInput" class="text-danger">
                            <span class="glyphicon glyphicon-warning-sign"></span> (Input unconfirmed)
                        </div>
                        <div data-ng-show="vin.dbError" class="text-danger">
                            <span class="glyphicon glyphicon-warning-sign"></span>
                            <span translate>Incoherence in levelDB detected:</span> {{vin.dbError}}
                        </div>
                        <div data-ng-show="vin.doubleSpentTxID" class="text-danger">
                            <span class="glyphicon glyphicon-warning-sign"></span>
                            <span translate>Double spent attempt detected. From tx:</span>
                            <a href="tx/{{vin.doubleSpentTxID}}">{{vin.doubleSpentTxID}},{{vin.doubleSpentIndex}}</a>
                        </div>
                    </div>
                </div>
                <div class="showmore_collapse text-left" data-ng-show="tx.vinSimple.length > 5"
                     data-ng-class="{ 'hidden': itemsExpanded}">
                    <button type="button" class="btn btn-info btn-sm" ng-hide="sizeInNoExpanded != tx.vinSimple.length"
                            ng-click="currentInNoExpanded=0; sizeInNoExpanded=5">
                        <i class="glyphicon glyphicon-chevron-up"></i>
                        <span translate>Show less</span></button>
                    <button type="button" class="btn btn-info btn-sm"
                            ng-hide="currentInNoExpanded >= tx.vinSimple.length/sizeInNoExpanded - 1"
                            ng-click="currentInNoExpanded=0; sizeInNoExpanded=tx.vinSimple.length">
                        <i class="glyphicon glyphicon-chevron-down"></i>
                        <span translate>Show more</span></button>
                </div>
            </div>

            <!-- <<< Full input  view -->
            <div data-ng-if="itemsExpanded"
                 data-ng-init="currentInExpanded=0; sizeInExpanded=(from_vin) ? tx.vin.length : 5; fromVinCollapsed=(from_vin)">
                <div data-ng-repeat="vin in tx.vin| startFrom:currentInExpanded*sizeInExpanded | limitTo:sizeInExpanded"
                     data-ng-if="fromVinCollapsed ? v_index == vin.n : 1">
                    <div class="panel panel-default transaction-vin-vout">
                        <div class="panel-body">
                            <div class="pull-right">
                                {{$root.currency.getConvertion(vin.value) || vin.value}}
                                <a title="{{vin.assetId}}" href="AssetsDetail/{{vin.assetId}}" data-ng-if="vin.assetId" >{{vin.shortName}}</a>
                                <span data-ng-if="!vin.assetId">{{vin.shortName}}</span>
                            </div>
                            <div class="ellipsis">
                                <a class="glyphicon glyphicon-chevron-right" href="tx/{{vin.txid}}/>/{{vin.vout}}"
                                   title="Outpoint: {{vin.txid}},{{vin.vout}}"></a>
                                <!--<span data-ng-show="vin.notAddr">{{vin.addr}}</span>-->
                                <a href="address/{{vin.addr}}" data-ng-show="!vin.notAddr">{{vin.addr}}</a>
                                <a data-ng-show="vin.notAddr">{{vin.notAddr}}</a>
                            </div>
                            <div data-ng-show="vin.unconfirmedInput" class="text-danger">
                                <span class="glyphicon glyphicon-warning-sign"></span>
                                <span translate>(Input unconfirmed)</span>
                            </div>
                            <div data-ng-show="vin.dbError" class="text-danger">
                                <span class="glyphicon glyphicon-warning-sign"></span>
                                <span translate>Incoherence in levelDB detected:</span> {{vin.dbError}}
                            </div>
                            <div data-ng-show="vin.doubleSpentTxID" class="text-danger">
                                <span class="glyphicon glyphicon-warning-sign"></span>
                                <span translate>Double spent attempt detected. From tx:</span>
                                <a href="tx/{{vin.doubleSpentTxID}}">{{vin.doubleSpentTxID}},{{vin.doubleSpentIndex}}</a>
                            </div>
                        </div> <!-- END OF PANEL BODY -->
                    </div> <!-- END OF PANEL-DEFAULT -->
                    <div class="small" style="margin-left:0.7em; word-wrap:break-word;margin-bottom: 30px;"
                         data-ng-class="{true: 'v_highlight', false: ''}[from_vin == true && v_index == vin.n]">
                        <p>
                            <strong>Confirmations:</strong>
                            <p class="col-md-12 ellipsis text-muted">{{vin.Confirmations }}</p>
                        </p>
                        <p>
                            <strong>scriptSig</strong>
                            <p class="col-md-12 ellipsis text-muted">{{vin.scriptSig}}</p>
                        </p>
                    </div>
                </div>
                <div class="text-left">
                    <button type="button" class="btn btn-default btn-sm" data-ng-show="(from_vin) && tx.vin.length > 1"
                            data-ng-disabled="fromVinCollapsed"
                            data-ng-click="currentInExpanded=0; sizeInExpanded=tx.vin.length;fromVinCollapsed=1">
                        <span translate>Show input</span> #{{ v_index }}
                    </button>
                    <button type="button" class="btn btn-default btn-sm" data-ng-show="(from_vin) && tx.vin.length > 1"
                            data-ng-disabled="!fromVinCollapsed"
                            data-ng-click="currentInExpanded=0; sizeInExpanded=tx.vin.length;fromVinCollapsed=0">
                        <span translate>Show all</span>
                    </button>
                </div>
                <div class="showmore_collapse text-left" data-ng-show="tx.vin.length > 5 && !fromVinCollapsed"
                     data-ng-class="{ 'hidden': !itemsExpanded}">
                    <button type="button" class="btn btn-info btn-sm" ng-hide="sizeInExpanded != tx.vin.length"
                            ng-click="currentInExpanded=0; sizeInExpanded=5">
                        <i class="glyphicon glyphicon-chevron-up"></i>
                        <span translate>Show less</span>
                    </button>
                    <button type="button" class="btn btn-info btn-sm"
                            ng-hide="currentInExpanded >= tx.vin.length/sizeInExpanded - 1"
                            ng-click="currentInExpanded=0; sizeInExpanded=tx.vin.length">
                        <i class="glyphicon glyphicon-chevron-down"></i>
                        <span translate>Show more</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-1 col-xs-12">
        <div class="hidden-xs hidden-sm text-center">
            <span class="lead glyphicon glyphicon-chevron-right text-muted"></span>
        </div>
        <div class="hidden-md hidden-lg text-center">
            <span class="lead glyphicon glyphicon-chevron-down text-muted"></span>
        </div>
    </div>
    <div class="col-md-6">
        <div class="row">
            <!-- Simple view >>> -->
            <div data-ng-if="!itemsExpanded" data-ng-init="currentOutNoExpanded=0; sizeOutNoExpanded=5">
                <div data-ng-repeat="vout in tx.voutSimple| startFrom:currentOutNoExpanded*sizeOutNoExpanded | limitTo:sizeOutNoExpanded">
                    <div class="transaction-vin-vout panel panel-default">
                        <div class="panel-body">
                            <div class="pull-right " data-ng-class="{'text-success': $root.currentAddr == vout.addr.trim()}">
                                {{$root.currency.getConvertion(vout.value) || vout.value}}
                                <a title="{{vout.assetId}}" href="AssetsDetail/{{vout.assetId}}" data-ng-if="vout.assetId" >{{vout.shortName}}</a>
                                <span data-ng-if="!vout.assetId">{{vout.shortName}}</span>
                                <span class="text-danger" data-ng-show="vout.isSpent" tooltip="Output is spent" tooltip-placement="left">(S)</span>
                                <span class="text-success" data-ng-show="!vout.isSpent" tooltip="Output is unspent" tooltip-placement="left">(U)</span>

                                <span class="text-danger" data-ng-show="vout.DepositFlag" tooltip="Output is Deposit" tooltip-placement="left">(D)</span>

                                <img src="./img/icon/lock_g.png" data-ng-show="vout.unlockHeight > 0 && vout.isLocked"/>
                                <img src="./img/icon/lock_o.png" data-ng-show="vout.unlockHeight > 0 && !vout.isLocked"/>
                            </div>
                            <div>
                                <span data-ng-show="vout.notAddr">{{vout.addr}}</span>
                                <span class="text-muted" title="Current SAFE Address"
                                      data-ng-show="address.trim() == $root.currentAddr"
                                      data-ng-repeat="address in vout.addr.split(',')">{{vout.addr}}</span>
                                <a href="address/{{address}}"
                                   data-ng-show="!vout.notAddr && address.trim() != $root.currentAddr"
                                   data-ng-repeat="address in vout.addr.split(',')">{{address}}</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="showmore_collapse text-left" data-ng-show="tx.voutSimple.length > 5"
                     data-ng-class="{ 'hidden': itemsExpanded}">
                    <button type="button" class="btn btn-info btn-sm"
                            ng-hide="sizeOutNoExpanded != tx.voutSimple.length"
                            ng-click="currentOutNoExpanded=0; sizeOutNoExpanded=5">
                        <i class="glyphicon glyphicon-chevron-up"></i>
                        <span translate>Show less</span></button>
                    <button type="button" class="btn btn-info btn-sm"
                            ng-hide="currentOutNoExpanded >= tx.voutSimple.length/sizeOutNoExpanded - 1"
                            ng-click="currentOutNoExpanded=0; sizeOutNoExpanded=tx.voutSimple.length">
                        <i class="glyphicon glyphicon-chevron-down"></i>
                        <span translate>Show more</span>
                    </button>
                </div>
            </div>

            <!-- Full output view >>> -->
            <div data-ng-if="itemsExpanded"
                 data-ng-init="currentOutExpanded=0; sizeOutExpanded=(from_vout) ? tx.vout.length : 5; fromVoutCollapsed=(from_vout)">
                <div data-ng-repeat="vout in tx.vout| startFrom:currentOutExpanded*sizeOutExpanded | limitTo:sizeOutExpanded"
                     data-ng-if="fromVoutCollapsed ? v_index == vout.n : 1">
                    <div class="panel panel-default transaction-vin-vout">
                        <div class="panel-body">
                            <div class="pull-right">
                                <span>{{$root.currency.getConvertion(vout.value) || vout.value   }}
                                    <a href="AssetsDetail/{{vout.reserve.assetId}}" data-ng-if="vout.reserve.assetId" >{{vout.shortName}}</a>
                                    <span data-ng-if="!vout.reserve.assetId">{{vout.shortName}}</span>
                                    <span class="text-success" data-ng-show="!vout.spentTxId" tooltip="Output is unspent" tooltip-placement="left">(U)</span>
                                    <a class="glyphicon glyphicon-chevron-right" data-ng-show="vout.spentTxId" href="tx/{{vout.spentTxId}}/</{{vout.spentIndex}}" title="Spent at: {{vout.spentTxId}},{{vout.spentIndex}}"></a>
                                    <span class="text-danger" data-ng-show="vout.DepositFlag" tooltip="Output is Deposit" tooltip-placement="left">(D)</span>
                                    <img src="./img/icon/lock_g.png" data-ng-show="vout.unlockHeight > 0 && vout.isLocked">
                                    <img src="./img/icon/lock_g.png"  data-ng-show="vout.unlockHeight > 0 && !vout.isLocked">
                                </span>
                            </div>
                            <div>
                                <a href="address/{{address}}" data-ng-repeat="address in vout.scriptPubKey.addresses">{{address}}</a>
                            </div>
                        </div>
                    </div>
                    <div style="padding-left: 0.7em; padding-bottom: 2em; word-wrap:break-word"
                         data-ng-class="{true: 'v_highlight', false: ''}[from_vout == true && v_index == vout.n]">
                        <p class="small">
                            <strong translate>Type</strong>
                            <span class="text-muted">{{vout.scriptPubKey.type}}</span>
                        </p>
                        <div class="small">
                            <p><strong translate>scriptPubKey</strong></p>
                            <span class="col-md-12 text-muted ellipsis">{{vout.scriptPubKey.asm}}</span>
                        </div>
                        <div class="small" data-ng-if="vout.originalReserve">
                            <p><strong>reverse</strong></p>
                            <span title="{{vout.originalReserve}}" class="col-md-12 text-muted ellipsis">{{vout.originalReserve}}</span>
                        </div>

                        <div class="small" data-ng-if="vout.reserve.remarks">
                            <p><strong translate>Remarks</strong></p>
                            <span title="{{vout.reserve.remarks}}" class="col-md-12 text-muted ellipsis">{{vout.reserve.remarks}}</span>
                        </div>

                        <div class="small" data-ng-if="vout.unlockHeight > 0">
                            <p style="color:blue;" ><strong translate>Lock Height</strong></p>
                            <span class="text-muted ellipsis">{{tx.blockheight}}</span>
                            <p style="color:red;"><strong translate>Unlock Height</strong></p>
                            <span class="text-muted ellipsis">{{$root.UnlockHeight.getSposNewUnlockHeight( vout.unlockHeight,tx.blockheight ) }}</span>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <button type="button" class="btn btn-default btn-sm"
                            data-ng-show="(from_vout) && tx.vout.length > 1" data-ng-disabled="fromVoutCollapsed"
                            data-ng-click="currentOutExpanded=0; sizeOutExpanded=tx.vout.length;fromVoutCollapsed=1">
                        Show output #{{ v_index }}
                    </button>
                    <button type="button" class="btn btn-default btn-sm"
                            data-ng-show="(from_vout) && tx.vout.length > 1" data-ng-disabled="!fromVoutCollapsed"
                            data-ng-click="currentOutExpanded=0; sizeOutExpanded=tx.vout.length;fromVoutCollapsed=0">
                        Show all
                    </button>
                </div>
                <div class="showmore_collapse text-left" data-ng-show="tx.vout.length > 5 && !fromVoutCollapsed"
                     data-ng-class="{ 'hidden': !itemsExpanded}">
                    <button type="button" class="btn btn-info btn-sm" ng-hide="sizeOutExpanded != tx.vout.length"
                            ng-click="currentOutExpanded=0; sizeOutExpanded=5">
                        <i class="glyphicon glyphicon-chevron-up"></i>Show less
                    </button>
                    <button type="button" class="btn btn-info btn-sm"
                            ng-hide="currentOutExpanded >= tx.vout.length/sizeOutExpanded - 1"
                            ng-click="currentOutExpanded=0; sizeOutExpanded=tx.vout.length">
                        <i class="glyphicon glyphicon-chevron-down"></i> Show more
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="well well-sm bgwhite ellipsis" data-ng-if="itemsExpanded && !block.hash && tx.blockhash">
    <strong translate>Included in Block</strong>
    <a class="text-muted" href="block/{{tx.blockhash}}">{{tx.blockhash}}</a>
    <span class="btn-copy" clip-copy="tx.blockhash"></span>
</div>

<!--pc buttom start-->
<div class="line-top row hidden-xs" data-ng-hide="!tx">

    <div class="col-xs-6 col-sm-4 col-md-2">

        <span data-ng-show="!tx.isCoinBase &&  !isNaN(parseFloat(tx.fees))" class="txvalues txvalues-default">
        <span translate>Fee</span>: {{$root.currency.getConvertion(tx.fees) || tx.fees + " SAFE" }}
        </span>
        <span data-ng-show="tx.isCoinBase &&  !isNaN(parseFloat(tx.valueOut))" class="txvalues txvalues-default">
        <span translate>Reward</span>: {{$root.currency.getConvertion(tx.valueOut) || tx.valueOut + " SAFE" }}
        </span>
    </div>

    <div class="col-xs-6 col-sm-8 col-md-10 text-right">
        <span class="txvalues txvalues-warning" data-ng-show="tx.appType < 300">
            <span data-ng-show="tx.appType == 100" translate>Register App</span>
            <span data-ng-show="tx.appType == 101" translate>Add App Authority</span>
            <span data-ng-show="tx.appType == 102" translate>Delete App Authority</span>
            <span data-ng-show="tx.appType == 103" translate>Add Extend Data</span>
            <span data-ng-show="tx.appType == 200" translate>Issue Assets</span>
            <span data-ng-show="tx.appType == 201" translate>Additional Assets Issued</span>
            <span data-ng-show="tx.appType == 202" translate>Transfer Asset</span>
            <span data-ng-show="tx.appType == 203" translate>Destory Asset</span>
            <span data-ng-show="tx.appType == 204" translate>Change Asset</span>
            <span data-ng-show="tx.appType == 205" translate>Send Candy</span>
            <span data-ng-show="tx.appType == 206" translate>Get Candy</span>
        </span>
        <span data-ng-show="tx.confirmations" class="txvalues txvalues-success">{{tx.confirmations}}
            <span translate>Confirmations</span>
        </span>
        <span data-ng-show="!tx.confirmations" class="txvalues txvalues-danger" translate>Unconfirmed Transaction!</span>
        <span class="txvalues txvalues-primary">{{$root.currency.getConvertion(tx.valueOut) || tx.valueOut + " SAFE"  }}</span>
        <span data-ng-show="tx.appType < 300 && tx.appType >= 200 " class="txvalues txvalues-info">{{$root.currency.getConvertion(tx.assetSend) || tx.assetSend +  tx.shortName}}</span>
    </div>
</div>
<!-- pc buttom end-->

<!-- mobile buttom start-->
<div class="visible-xs" data-ng-hide="!tx">
    <div class="pages_de_li_xs row clearfix" style="margin-bottom: -15px">
        <ul>
            <li class="li_one red"><span translate>received</span>：{{$root.currency.getConvertion(tx.valueOut) || tx.valueOut + ""  }}</li>

            <li data-ng-show="tx.confirmations" class="li_two blue"><span translate>Confirmations</span>:{{tx.confirmations}}</li>
            <li data-ng-show="!tx.confirmations" class="li_two blue" translate>Unconfirmed Transaction!</li>

            <li data-ng-show="tx.appType < 300 && tx.appType >= 200 " class="ellipsis" style="padding-right: 10px;">{{$root.currency.getConvertion(tx.assetSend) || tx.assetSend +  tx.shortName}}</li>

            <li data-ng-show="tx.appType < 300" class="li_three">
                <span data-ng-show="tx.appType == 100" translate>Register App</span>
                <span data-ng-show="tx.appType == 101" translate>Add App Authority</span>
                <span data-ng-show="tx.appType == 102" translate>Delete App Authority</span>
                <span data-ng-show="tx.appType == 103" translate>Add Extend Data</span>
                <span data-ng-show="tx.appType == 200" translate>Issue Assets</span>
                <span data-ng-show="tx.appType == 201" translate>Additional Assets Issued</span>
                <span data-ng-show="tx.appType == 202" translate>Transfer Asset</span>
                <span data-ng-show="tx.appType == 203" translate>Destory Asset</span>
                <span data-ng-show="tx.appType == 204" translate>Change Asset</span>
                <span data-ng-show="tx.appType == 205" translate>Send Candy</span>
                <span data-ng-show="tx.appType == 206" translate>Get Candy</span>
            </li>

            <!--class="li_one"-->
            <li class="li_two" data-ng-show="!tx.isCoinBase &&  !isNaN(parseFloat(tx.fees))">
                <span translate>Fee</span>: {{$root.currency.getConvertion(tx.fees) || tx.fees + " SAFE" }}
            </li>
            <li class="li_two" data-ng-show="tx.isCoinBase &&  !isNaN(parseFloat(tx.valueOut))">
                <span translate>Reward</span>: {{$root.currency.getConvertion(tx.valueOut) || tx.valueOut + " SAFE" }}
            </li>

        </ul>
    </div>
</div>

<!--mobile buttom end-->