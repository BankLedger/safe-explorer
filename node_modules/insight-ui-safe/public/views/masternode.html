<div data-ng-include src="'views/includes/connection.html'"></div>
<div data-ng-controller="MastrtnodeController" data-ng-init="judgeNotMobile()">

    <div class="row">
        <div class="col-xs-12 col-md-12" style="height:690px;">
            <div class="row form-group" style="margin-top: 30px;">
                <h1>
                    <span class="navbar-left col-md-3 col-xs-12" translate>Masternodes</span>
                </h1>
                <div class="navbar-left col-md-4 col-xs-12">
                    <input type="text" data-ng-model="search" class="form-control "
                           data-ng-keyup="($event.which === 13)?searchFunc():0"
                           placeholder="{{'search for IP or collateral SAFE address' |translate}}"/>
                </div>
                <div class="navbar-left col-md-2 col-xs-3">
                    <div class="btn btn-default"
                         style="border-radius: 50%; height: 95px;background: -webkit-linear-gradient(bottom, green {{rate-20}}%,white {{rate+5}}%);">
                        <div style="margin-top: 15px;">
                            {{rate || 0}}%
                        </div>
                        <div>
                            ENABLED
                        </div>
                    </div>
                </div>
                <div class="navbar-left col-md-3 col-xs-9" style="font-size:2.5rem">
                    <span translate>Total </span> :{{count || 0}}
                </div>
            </div>
            <ul class="nav nav-tabs">
                <li class="{{MasterNodeListTabClass}}" data-ng-click="list(1)">
                    <a data-toggle="tab" translate>Masternodes</a>
                </li>
                <li class="{{followNodeListTabClass}}" data-ng-click="followNode(1)">
                    <a data-toggle="tab" translate>Watchlisted Masternodes</a>
                </li>
                <li class="{{MasterNodeRateTabClass}}" data-ng-click="showRate()">
                    <a data-toggle="tab" translate>节点状态分布</a>
                </li>
            </ul>
            <div class="row" data-ng-show="MasterNodeRateTabClass" >
                <div id="piechart" style="width: 100%;height: 400px; padding: 0;margin-top: 50px; border-width: 0;" >

                </div>
            </div>
            
            <div data-ng-show=" !MasterNodeRateTabClass ">
                <div class="row" data-ng-show="!masternode.length && loading==false && MasterNodeListTabClass">
                    <h2 class="text-center text-muted" translate>No Master Node Yet.</h2>
                </div>
                <table style="table-layout:fixed" class="table table-hover table-striped tab-content">
                    <thead>
                    <tr>
                        <th class="col-md-6 " translate>Collateral Safe Address</th>
                        <th translate>IP</th>
                        <th class="text-right" translate>Status</th>
                        <th class="text-right" translate>Add to Watchlist</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr data-ng-show="loading">
                        <td colspan="5"><span translate>Waiting for Master Node...</span>
                            <span class="loader-gif"></span>
                        </td>
                    </tr>
                    <tr class="fader" data-ng-repeat='m in masternode'>
                        <td style="overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">{{m.address}}</td>
                        <td>{{m.ip}}</td>
                        <td style="overflow:hidden;white-space:nowrap;text-overflow:ellipsis;" class="text-right">
                            {{m.status}}
                        </td>
                        <td class="text-right">
                            <img src="./img/icon/no_follow.png" width="40px" data-ng-show="!isFollow && !m.beforeFollow"
                                 data-ng-click="insert(m)"/>
                            <img src="./img/icon/follow_add.png" width="40px" data-ng-show="!isFollow && m.beforeFollow"
                                 data-ng-click="delete(m)"/>
                            <img src="./img/icon/follow_del.png" width="40px" data-ng-show="isFollow"
                                 data-ng-click="delete(m)"/>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div data-ng-show="maxPage > 1 && !MasterNodeRateTabClass">
            <div class="col-md-7 col-sm-7">
                <div class="text-left">
                    <a class="btn btn-primary" data-ng-click="judgeIsFollow(prePage)" data-ng-if="maxPage > 3 "
                       translate>Previous</a>
                    <a class="btn {{i.class}}" data-ng-click="judgeIsFollow(i.num)" data-ng-show="pageBut.length > 1"
                       style="margin:0px 5px;" data-ng-repeat='i in pageBut'>{{i.num}}</a>
                    <a class="btn btn-primary" data-ng-click="judgeIsFollow(nextPage)" data-ng-if="maxPage > 3"
                       translate>Next</a>
                </div>
            </div>
            <div class="col-md-5 col-sm-5 text-right">
                <label style="font-size: 14px;margin-top: 5px;" class="col-md-5 col-sm-5 control-lable">
                    <span translate>Page Count</span>：{{maxPage}}
                </label>
                <div class="col-md-4 col-sm-4">
                    <input data-ng-model="jumpPage" type="number" id="jumpInput" class="form-control"/>
                </div>
                <button class="btn btn-success col-md-3 col-sm-3" data-ng-click="jumpPageBut()" translate>Jump To</button>
            </div>
        </div>
    </div>
</div>
