<style>
    span.icon_click2, .icon_click_minus2 {
        display: inline-block;
        position: relative;
        left: 0;
        top: 0;
    }

    .icon_click_minus2 > img {
        width: 15px;
    }

    .icon_click2 > img {
        width: 15px;
    }

    .select-li {
        position: absolute;
        overflow-y: auto;
        width: 249px;
        background: #fff;
        z-index: 9999;
        border-radius: 5px;
        max-height: 200px;
        border: 1px solid #ccc;
    }

    .select-li > li {
        line-height: 28px;
        padding-left: 26px;
    }

    .select-li > li:hover {
        background: #ececec;
    }

    .assetNameInput {
        width: 250px;
    }

    /*实心三角*/
    .content {
        width: 0;
        height: 10px;
        border: 7px solid;
        border-color: #666 transparent transparent transparent;
        margin-top: -20px;
        margin-left: 220px;
        position: absolute;
    }

    .totalLocked-md {
        float: right;
        font-size: 16px;
        margin: 15px 0;
        padding-right: 50px;
    }

    .totalLocked-xs {
        font-size: 1.5rem;
        margin-top: 5px;
    }

</style>

<div data-ng-include src="'views/includes/connection.html'"></div>

<section data-ng-controller="lockedAddressController" data-ng-init="BalanceRankingList(1,'true')">

    <!-- table PC start-->
    <ul class="nav nav-tabs hidden-xs" style="margin-top: 70px;">
        <li class="{{balanceRankingTabClass}}" data-ng-click="BalanceRankingList(1,'true')">
            <a data-toggle="tab" translate>SAFE <span translate>Asset Amount</span></a>
        </li>
        <li class="{{addressLockedTabClass}}"  data-ng-click="LockedAddressList(1,'true')">
            <a data-toggle="tab" translate>Locked Address</a>
        </li>
        <li class="{{txLockedListTabClass}}"   data-ng-click="LockedTransactionList(1,'true')">
            <a data-toggle="tab" translate>Locked Transaction</a>
        </li>

        <!-- 只有非资产排名的时候显示这个搜索框 -->
        <li style="float: right" data-ng-show="isNotSafeRanking()">
            <div style="display: inline-block;padding-left: 10px;">
                <button class="btn" data-ng-click="searchAssetNameBtn()" translate>Search</button>
            </div>
        </li>
        <!--PC search start-->
        <li style="float: right" data-ng-show="isNotSafeRanking()">
            <div>
                <input data-ng-click="showAssetSearchDiv()" data-ng-model="assetSearch" id="assetNameInput"
                       placeholder="{{'Search Asset Short Name'|translate}}" class="form-control assetNameInput"/>
                <span data-ng-click="showAssetSearchDiv()" class="content"></span>
                <div id="assetNameDiv" style="display: none;" data-ng-init="getAssetNameList('')">
                    <ul class="select-li" data-ng-click="hideAssetSearchDiv()">
                        <li data-ng-click="assetNameClick(asset.name)" data-ng-repeat="asset in assetNameList">
                            {{asset.name}}
                        </li>
                    </ul>
                </div>
            </div>
        </li>
        <!--PC search end-->
    </ul>
    <!-- table PC end-->

    <!-- table mobile start-->
    <ul class="nav nav-tabs visible-xs" style="padding-top:20px;">
        <li class="{{balanceRankingTabClass}}" data-ng-click="BalanceRankingList(1,'true')" style="width: 33%">
            <a data-toggle="tab" translate>SAFE资产排行</a>
        </li>
        <li class="{{addressLockedTabClass}}" data-ng-click="LockedAddressList(1,'true')" style="width: 33%">
            <a data-toggle="tab" translate>Locked Address</a>
        </li>
        <li class="{{txLockedListTabClass}}" data-ng-click="LockedTransactionList(1,'true')" style="width: 33%">
            <a data-toggle="tab" translate>Locked Transaction</a>
        </li>
    </ul>
    <!-- mobile search start -->
    <div class="visible-xs" style="padding-top: 10px" data-ng-show="isNotSafeRanking()">
        <div style="float: left;">
            <input data-ng-click="showAssetSearchDivMobile()" data-ng-model="assetSearch" id="assetNameInputTow"
                   placeholder="{{'Search Asset Short Name'|translate}}" class="form-control assetNameInput"/>
            <span data-ng-click="showAssetSearchDivMobile()" class="content"></span>
            <div id="assetNameDivMobile" style="display: none;" data-ng-init="getAssetNameList('')">
                <ul class="select-li" data-ng-click="hideAssetSearchDivMobile()">
                    <li data-ng-click="assetNameClick(asset.name)" data-ng-repeat="asset in assetNameList">
                        {{asset.name}}
                    </li>
                </ul>
            </div>
        </div>
        <div style="display: inline-block;padding-left: 10px;">
            <button class="btn" data-ng-click="searchAssetNameBtn()" translate>Search</button>
        </div>
    </div>
    <!-- mobile search end -->
    <!-- table mobile end-->

        <!-- address PC start -->
        <div class="row {{addressLockedConentClass}}">
            <div class="col-xs-12 col-md-12 col-md-offset-3" style="margin-left: 0;">
                <div class="page-header">
                    <h1>
                        <span translate>Locked Address</span>
                        <small><span translate>Rank</span></small>
                        <small class="hidden-xs totalLocked-md">
                            <span translate>Total Locking</span>：{{totalLocked}}
                        </small>
                        <small class="visible-xs totalLocked-xs">
                            <span translate>Total Locking</span>：{{totalLocked}}
                        </small>
                    </h1>
                </div>
                <!-- address PC locked list start -->
                <div style="min-height: 443px;" class="hidden-xs">
                    <h2 class="text-center text-muted" data-ng-show="!address.list.length && !address.loading" translate>
                        No lock Transactions And Addresses.
                    </h2>
                    <table class="table table-hover table-striped ">
                        <thead>
                        <tr>
                            <th style="line-height: 36px;" class="col-md-7" translate>Address</th>
                            <th><span translate>Lock Amount</span>
                                <span class="btn btn-primary" data-ng-click="addressLockedOrder()">{{address.orderIcon || ' '}}</span>
                            </th>
                            <th style="line-height: 36px;" translate>Number of Locked TX</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr data-ng-show="address.loading">
                            <td colspan="5"><span translate>Loading...</span>
                                <span class="loader-gif"></span>
                            </td>
                        </tr>
                        <tr class="fader" data-ng-repeat='a in address.list'>
                            <td>
                                <a style="margin-left: 15px;" href="address/{{a.address}}">{{a.address}}</a>
                            </td>
                            <td>{{formatNumber(a.lockeVal)}}</td>
                            <td><a href="lockedDetail/{{a.address}}/{{thisAssetName}}">{{a.lockCount}}</a></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <!-- address PC locked list end -->
    
                <!-- address PC locked btn start  -->
                <div class="hidden-xs" data-ng-show="address.maxPage > 1">
                    <div class="col-md-7 col-sm-7">
                        <div class="text-left">
                            <a class="btn btn-primary" data-ng-click="LockedAddressList(address.prePage)"
                               data-ng-if="address.maxPage > 3" translate>Previous</a>
                            <a class="btn {{i.class}}" data-ng-click="LockedAddressList(i.num)"
                               data-ng-show="address.pageBut.length > 1"
                               style="margin:0px 5px;" data-ng-repeat='i in address.pageBut'>{{i.num}}</a>
                            <a class="btn btn-primary" data-ng-click="LockedAddressList(address.nextPage)"
                               data-ng-if="address.maxPage > 3 " translate>Next</a>
                        </div>
                    </div>
                    <div class="col-md-5 col-sm-5 text-right">
                        <label style="font-size: 14px;margin-top: 5px;" class="col-md-5  col-sm-5 control-lable">
                            <span translate>Page Count</span>：{{address.maxPage}}
                        </label>
                        <div class="col-md-4">
                            <input data-ng-model="jumpAddressPage" type="number" id="jumpAddressInput"
                                   class="form-control"/>
                        </div>
                        <button class="btn btn-success col-md-3 col-sm-3" data-ng-click="jumpAddressPageBut()" translate>
                            Jump To
                        </button>
                    </div>
                </div>
                <!-- address PC locked btn end  -->
    
                <!-- address mobile locked list start-->
                <div class="visible-xs">
                    <h2 class="text-center text-muted" data-ng-show="!address.list.length && !address.loading" translate>No
                        lock Transactions And Addresses.</h2>
                    <div data-ng-show="address.list.length > 0">
                        <span translate>Lock Amount</span>
                        <span class="btn btn-xs btn-primary" data-ng-click="addressLockedOrder()">{{address.orderIcon || ' '}}</span>
                    </div>
                    <div class="detail_box" data-ng-repeat="a in address.list">
                        <ul class="device_ul">
                            <li>
                                <div class="device_name"><strong translate>Address</strong></div>
                                <div class="device_text text-muted js_device">
                                    <span class="icon_click" data-ng-show="ExpandedaddrID == true"
                                          data-ng-click="ExpandedaddrID = false">
                                        <img src="./img/images/icon-add.png">
                                    </span>
                                    <span class="icon_click_minus" data-ng-show="!ExpandedaddrID"
                                          data-ng-click="ExpandedaddrID = true">
                                        <img src="./img/images/icon-minus.png">
                                    </span>
                                    <span class="device_span device_show" data-ng-show="ExpandedaddrID">
                                        <a href="address/{{a.address}}">{{a.address.slice(0,10) + "......." +  a.address.slice(24,a.address.length)}}</a>
                                    </span>
                                    <span class="device_span device_hidden" data-ng-show="!ExpandedaddrID">
                                        <a href="address/{{a.address}}">{{a.address}}</a>
                                    </span>
                                </div>
                            </li>
                            <li>
                                <div class="device_name"><strong translate>Lock Amount</strong></div>
                                <div class="device_text text-muted">{{a.lockeVal}}</div>
                            </li>
                            <li>
                                <div class="device_name"><strong translate>Number of Locked TX</strong></div>
                                <div class="device_text text-muted">
                                    <a href="lockedDetail/{{a.address}}/{{thisAssetName}}">{{a.lockCount}}</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- address mobile locked list end-->
    
                <!-- address mobile locked buts start-->
                <div class="pages visible-xs" data-ng-show="address.maxPage > 1">
                    <span class="pages_right">
                        <a class="{{i.class}}" data-ng-click="LockedAddressList(i.num)"
                           data-ng-show="address.pageButM.length > 1" data-ng-repeat='i in address.pageButM'>{{i.num}}</a>
                    </span>
                    <span translate>Page Count</span>：{{address.maxPage}}
                </div>
                <!-- address mobile locked buts end-->
            </div>
        </div>
        <!-- address PC end -->


    <!-- balance ranking PC start -->
    <div class="row {{balanceRankingContentClass}}">
        <div class="col-xs-12 col-md-12 col-md-offset-3" style="margin-left: 0;">
            <div class="page-header">
                <h1>
                    <span translate>Asset Amount</span>
                    <small><span translate>Rank</span></small>
                </h1>
            </div>
            <!-- address PC locked list start -->
            <div style="min-height: 443px;" class="hidden-xs">

                <h2 class="text-center text-muted" data-ng-show="!ranking.list.length && !ranking.loading" translate>
                    No Transactions And Addresses.
                </h2>
                <table class="table table-hover table-striped ">
                    <thead>
                    <tr>
                        <th style="line-height: 36px;" class="col-md-7" translate>Address</th>
                        <th>
                            <span translate>Lock Amount</span>
                        </th>
                        <th style="line-height: 36px;">
                            <span translate>Total Amount</span>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr data-ng-show="ranking.loading">
                        <td colspan="5"><span translate>Loading...</span>
                            <span class="loader-gif"></span>
                        </td>
                    </tr>
                    <tr class="fader" data-ng-repeat='a in ranking.list'>
                        <td>
                            <a style="margin-left: 15px;" href="address/{{a.address}}">
                                {{a.address}}
                            </a>
                        </td>
                        <td>{{formatNumber8(a.locked)}}</td>
                        <td>{{formatNumber8(a.balance)}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <!-- address PC locked list end -->

            <!-- ranking PC locked btn start  -->
            <div class="hidden-xs" data-ng-show="ranking.maxPage > 1">
                <div class="col-md-7 col-sm-7">
                    <div class="text-left">
                        <a class="btn btn-primary" data-ng-click="BalanceRankingList(ranking.prePage)"
                           data-ng-if="ranking.maxPage > 3" translate>Previous</a>
                        <a class="btn {{i.class}}" data-ng-click="BalanceRankingList(i.num)"
                           data-ng-show="ranking.pageBut.length > 1"
                           style="margin:0px 5px;" data-ng-repeat='i in ranking.pageBut'>{{i.num}}</a>
                        <a class="btn btn-primary" data-ng-click="BalanceRankingList(ranking.nextPage)"
                           data-ng-if="ranking.maxPage > 3 " translate>Next</a>
                    </div>
                </div>
                <div class="col-md-5 col-sm-5 text-right">
                    <label style="font-size: 14px;margin-top: 5px;" class="col-md-5  col-sm-5 control-lable">
                        <span translate>Page Count</span>：{{ranking.maxPage}}
                    </label>
                    <div class="col-md-4">
                        <input data-ng-model="jumpRankingPage" type="number" id="jumpRankingInput"
                               class="form-control"/>
                    </div>
                    <button class="btn btn-success col-md-3 col-sm-3" data-ng-click="jumpRankingPageBut()" translate>
                        Jump To
                    </button>
                </div>
            </div>
            <!-- ranking PC locked btn end  -->

            <!-- address mobile locked list start-->
            <div class="visible-xs">

                <h2 class="text-center text-muted" data-ng-show="!ranking.list.length && !ranking.loading" translate>No
                    Transactions And Addresses.</h2>
                <div data-ng-show="ranking.list.length > 0">
                    <span translate>Lock Amount</span>
                </div>
                <div class="detail_box" data-ng-repeat="a in ranking.list">
                    <ul class="device_ul">
                        <li>
                            <div class="device_name"><strong translate>Address</strong></div>
                            <div class="device_text text-muted js_device">
                                <span class="icon_click" data-ng-show="ExpandedaddrID == true"
                                      data-ng-click="ExpandedaddrID = false">
                                    <img src="./img/images/icon-add.png">
                                </span>
                                <span class="icon_click_minus" data-ng-show="!ExpandedaddrID"
                                      data-ng-click="ExpandedaddrID = true">
                                    <img src="./img/images/icon-minus.png">
                                </span>
                                <span class="device_span device_show" data-ng-show="ExpandedaddrID">
                                    <a href="address/{{a.address}}">{{a.address.slice(0,10) + "......." +  a.address.slice(24,a.address.length)}}</a>
                                </span>
                                <span class="device_span device_hidden" data-ng-show="!ExpandedaddrID">
                                    <a href="address/{{a.address}}">{{a.address}}</a>
                                </span>
                            </div>
                        </li>
                        <li>
                            <div class="device_name"><strong translate>Lock Amount</strong></div>
                            <div class="device_text text-muted">{{formatNumber8(a.locked)}}</div>
                        </li>
                        <li>
                            <div class="device_name"><strong translate>Total Amount</strong></div>
                            <div class="device_text text-muted">
                                {{formatNumber8(a.balance)}}
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- address mobile locked list end-->

            <!-- address mobile locked buts start-->
            <div class="pages visible-xs" data-ng-show="ranking.maxPage > 1">
                <span class="pages_right">
                    <a class="{{i.class}}" data-ng-click="BalanceRankingList(i.num)"
                       data-ng-show="ranking.pageButM.length > 1" data-ng-repeat='i in ranking.pageButM'>{{i.num}}</a>
                </span>
                <span translate>Page Count</span>：{{ranking.maxPage}}
            </div>
            <!-- address mobile locked buts end-->
        </div>
    </div>
    <!-- address locked PC end -->

    <!-- transaction locked PC  start -->
    <div class="row {{txLockedListConentClass}}">
        <div class="col-xs-12 col-md-12 col-md-offset-3" style="margin-left: 0;">
            <div class="page-header">
                <h1>
                    <span translate>Locked Transaction</span>
                    <small><span translate>Rank</span></small>
                    <small class="hidden-xs totalLocked-md">
                        <span translate>Total Locking</span>：{{totalLocked}}
                    </small>
                    <small class="visible-xs totalLocked-xs">
                        <span translate>Total Locking</span>：{{totalLocked}}
                    </small>
                </h1>
            </div>
            <!-- transaction PC locked list start -->
            <div style="height: 443px;" class="hidden-xs">

                <h2 class="text-center text-muted" data-ng-show="!address.list.length && !address.loading" translate>No
                    lock Transactions And Addresses.</h2>
                <table class="table table-hover table-striped ">
                    <thead>
                    <tr>
                        <th style="line-height: 36px;" class="col-md-3" translate>Transaction ID</th>
                        <th><span translate>Lock Amount</span>
                            <span class="btn btn-primary" data-ng-click="transactionLockedOrder('Money')">{{transaction.orderMoneyIcon || ' '}}</span>
                        </th>
                        <th style="line-height: 36px;" translate>Locked Address</th>
                        <th class="col-md-2">
                            <span translate>Lock Time</span>
                            <span class="btn btn-primary" data-ng-click="transactionLockedOrder('Time')">{{transaction.orderTimeIcon || ' '}}</span>
                        </th>
                        <th>
                            <span translate>Unlock Height</span>
                            <span class="btn btn-primary" data-ng-click="transactionLockedOrder('Height')">{{transaction.orderHeightIcon || ' '}}</span>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr data-ng-show="transaction.loading">
                        <td colspan="5"><span translate>Loading...</span>
                            <span class="loader-gif"></span>
                        </td>
                    </tr>
                    <tr class="fader" data-ng-repeat='t in transaction.list'>
                        <td>
                            <a href="tx/{{t.txId}}">{{t.txId.slice(0,15) + "......." +
                                t.txId.slice(50,t.txId.length)}}</a>
                        </td>
                        <td>{{formatNumber(t.lockedVal)}}</td>
                        <td><a href="address/{{t.address}}">{{t.address}}</a></td>
                        <td>{{(t.txTime * 1000 )| date:'yyyy-MM-dd HH:mm:ss'}}</td>
                        <td>{{ $root.UnlockHeight.getSposNewUnlockHeight( t.unlockedHeight,t.lockedHeight ) }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <!-- transaction PC locked list end -->

            <!-- transaction PC locked btn start  -->
            <div class="hidden-xs" data-ng-show="transaction.maxPage > 1">
                <div class="col-md-7 col-sm-7">
                    <div class="text-left">
                        <a class="btn btn-primary" data-ng-click="LockedTransactionList(transaction.prePage)"
                           data-ng-if="transaction.maxPage > 3" translate>Previous</a>
                        <a class="btn {{i.class}}" data-ng-click="LockedTransactionList(i.num)"
                           data-ng-show="transaction.pageBut.length > 1" style="margin:0px 5px;"
                           data-ng-repeat='i in transaction.pageBut'>{{i.num}}</a>
                        <a class="btn btn-primary" data-ng-click="LockedTransactionList(transaction.nextPage)"
                           data-ng-if="transaction.maxPage > 3 " translate>Next</a>
                    </div>
                </div>
                <div class="col-md-5 col-sm-5 text-right">
                    <label style="font-size: 14px;margin-top: 5px;" class="col-md-5  col-sm-5 control-lable">
                        <span translate>Page Count</span>：{{transaction.maxPage}}
                    </label>
                    <div class="col-md-4">
                        <input data-ng-model="jumpTransactionPage" type="number" id="jumpTransactionInput"
                               class="form-control"/>
                    </div>
                    <button class="btn btn-success col-md-3 col-sm-3" data-ng-click="jumpTransactionPageBut()"
                            translate>Jump To
                    </button>
                </div>
            </div>
            <!-- transaction PC locked btn end  -->

            <!-- transaction mobile locked list start-->
            <div class="visible-xs">

                <h2 class="text-center text-muted" data-ng-show="!address.list.length && !address.loading" translate>No
                    lock Transactions And Addresses.</h2>
                <div class="row" style="margin: 0 auto;" data-ng-show="transaction.list.length > 0">
                    <div style="float: left; margin: 0 5px;">
                        <span translate>Lock Amount</span>
                        <span class="btn btn-xs btn-primary" data-ng-click="transactionLockedOrder('Money')">{{transaction.orderMoneyIcon || ' '}}</span>
                    </div>
                    <div style="float: left; margin: 0 5px;">
                        <span translate>Lock Time</span>
                        <span class="btn btn-xs btn-primary" data-ng-click="transactionLockedOrder('Time')">{{transaction.orderTimeIcon || ' '}}</span>
                    </div>
                    <div style="float: left; margin: 0 5px;">
                        <span translate>Unlock Height</span>
                        <span class="btn btn-xs btn-primary" data-ng-click="transactionLockedOrder('Height')">{{transaction.orderHeightIcon || ' '}}</span>
                    </div>
                </div>
                <br/>
                <div class="detail_box" data-ng-repeat="t in transaction.list">
                    <ul class="device_ul">
                        <li>
                            <div class="device_name"><strong translate>Transaction ID</strong></div>
                            <div class="device_text text-muted js_device">
                                <span class="icon_click" data-ng-show="ExpandedTxID == true"
                                      data-ng-click="ExpandedTxID = false"><img src="./img/images/icon-add.png"></span>
                                <span class="icon_click_minus" data-ng-show="!ExpandedTxID"
                                      data-ng-click="ExpandedTxID = true"><img src="./img/images/icon-minus.png"></span>
                                <span class="device_span device_show" data-ng-show="ExpandedTxID"><a
                                        href="tx/{{t.txId}}">{{t.txId.slice(0,10) + "......." +  t.txId.slice(55,t.txId.length)}}</a></span>
                                <span class="device_span device_hidden" data-ng-show="!ExpandedTxID"><a
                                        href="tx/{{t.txId}}">{{t.txId}}</a></span>
                            </div>
                        </li>
                        <li>
                            <div class="device_name"><strong translate>Lock Amount</strong></div>
                            <div class="device_text text-muted">{{formatNumber(t.lockedVal)}}</div>
                        </li>
                        <li>
                            <div class="device_name"><strong translate>Locked Address</strong></div>
                            <div class="device_text text-muted">
                                <span class="icon_click" data-ng-show="ExpandedaddrID == true"
                                      data-ng-click="ExpandedaddrID = false">
                                    <img src="./img/images/icon-add.png">
                                </span>
                                <span class="icon_click_minus" data-ng-show="!ExpandedaddrID"
                                      data-ng-click="ExpandedaddrID = true">
                                    <img src="./img/images/icon-minus.png">
                                </span>
                                <span class="device_span device_show" data-ng-show="ExpandedaddrID">
                                    <a href="address/{{t.address}}">{{t.address.slice(0,10) + "......." +  t.address.slice(24,t.address.length)}}</a>
                                </span>
                                <span class="device_span device_hidden" data-ng-show="!ExpandedaddrID">
                                    <a href="address/{{t.address}}">{{t.address}}</a>
                                </span>
                            </div>
                        </li>

                        <li>
                            <div class="device_name"><strong translate>Lock Time</strong></div>
                            <div class="device_text text-muted">{{t.txTime * 1000 | date:'yyyy-MM-dd HH:mm:ss'}}</div>
                        </li>
                        <li>
                            <div class="device_name"><strong translate>Unlock Height</strong></div>
                            <div class="device_text text-muted">{{t.unlockedHeight}}</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- transaction mobile locked list end-->

        <!-- transaction mobile locked buts start-->
        <div class="pages visible-xs" style="overflow: visible;padding: 0 30px;" data-ng-show="transaction.maxPage > 1">
                <span class="pages_right">
                    <a class="{{i.class}}" data-ng-click="LockedTransactionList(i.num)"
                       data-ng-show="transaction.pageButM.length > 1" data-ng-repeat='i in transaction.pageButM'>{{i.num}}</a>
                </span>
            <span translate>Page Count</span>：{{transaction.maxPage}}
        </div>
        <!-- transaction mobile locked buts end-->
    </div>
    <!-- transaction locked PC end -->

</section>







